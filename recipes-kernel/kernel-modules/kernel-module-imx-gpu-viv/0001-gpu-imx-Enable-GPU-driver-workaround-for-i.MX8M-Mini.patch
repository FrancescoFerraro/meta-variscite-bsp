
From c5f854aab98a22b9435d19c5e4a4c22fc2be6021 Mon Sep 17 00:00:00 2001
From: Felix Radensky <felix.r@variscite.com>
Date: Mon, 29 Jun 2020 21:30:45 +0300
Subject: [PATCH] gpu: imx: Enable GPU driver workaround for i.MX8M Mini and
 Nano with 4GB of RAM

---
 src/hal/os/linux/kernel/platform/freescale/gc_hal_kernel_platform_imx.c    | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/src/hal/os/linux/kernel/platform/freescale/gc_hal_kernel_platform_imx.c b/src/hal/os/linux/kernel/platform/freescale/gc_hal_kernel_platform_imx.c
index ebfcc1990578..b593887d0a1d 100644
--- a/src/hal/os/linux/kernel/platform/freescale/gc_hal_kernel_platform_imx.c
+++ b/src/hal/os/linux/kernel/platform/freescale/gc_hal_kernel_platform_imx.c
@@ -1678,7 +1678,9 @@ _AdjustParam(
     patch_param(Platform->device, Args);
 
 #if LINUX_VERSION_CODE >= KERNEL_VERSION(5,0,0)
-    if (of_find_compatible_node(NULL, NULL, "fsl,imx8mq-gpu") &&
+    if ((of_find_compatible_node(NULL, NULL, "fsl,imx8mq-gpu") ||
+	 of_find_compatible_node(NULL, NULL, "fsl,imx8mm-gpu") ||
+	 of_find_compatible_node(NULL, NULL, "fsl,imx8mn-gpu")) &&
         ((Args->baseAddress + totalram_pages() * PAGE_SIZE) > 0x100000000))
 #else
      if (of_find_compatible_node(NULL, NULL, "fsl,imx8mq-gpu") &&
-- 
2.17.1

